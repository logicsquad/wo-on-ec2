# Apache SSL configuration

LoadModule ssl_module modules/mod_ssl.so
Listen 443

SSLPassPhraseDialog builtin
SSLSessionCache shmcb:/var/cache/mod_ssl/scache(512000)
SSLSessionCacheTimeout 300
SSLMutex default
SSLRandomSeed startup file:/dev/urandom  256
SSLRandomSeed connect builtin
SSLCryptoDevice builtin

##
## SSL Virtual Host Context
##

<VirtualHost _default_:443>
# EDIT: Application-specific properties
ServerAdmin
DocumentRoot /var/www/html/app.example.com
ServerName app.example.com
ErrorLog /var/log/httpd/app.example.com-error_log
CustomLog /var/log/httpd/app.example.com-access_log common
RewriteEngine On
RewriteRule ^/$ /Apps/WebObjects/Foo.woa/ [PT]
RewriteRule ^/foo(.*)$ /Apps/WebObjects/Foo.woa$1 [PT,L]

SSLEngine on
SSLProtocol ALL -SSLv2 -SSLv3
SSLHonorCipherOrder On
SSLCipherSuite ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:RSA+AESGCM:RSA+AES:!aNULL:!MD5:!DSS

# EDIT: domain-specific certificate locations
SSLCertificateFile /etc/pki/tls/certs/app.example.com.crt
SSLCertificateKeyFile /etc/pki/tls/private/app.example.com.key
SSLCertificateChainFile /etc/pki/tls/certs/app.example.com.chain.crt

SetEnvIf User-Agent ".*MSIE.*" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0

CustomLog logs/ssl_request_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
</VirtualHost>                                  
